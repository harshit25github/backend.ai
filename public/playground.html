<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trip Planner Playground</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --card: #1f2937;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22d3ee;
      --accent-2: #a78bfa;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at 20% 20%, rgba(34,211,238,0.08), transparent 35%),
                  radial-gradient(circle at 80% 10%, rgba(167,139,250,0.12), transparent 30%),
                  radial-gradient(circle at 60% 80%, rgba(34,197,94,0.07), transparent 30%),
                  var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px 16px 32px;
    }
    h1 {
      margin: 0 0 12px;
      font-size: 24px;
      letter-spacing: -0.5px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    h1 span.logo {
      display: inline-flex;
      width: 36px;
      height: 36px;
      border-radius: 10px;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #0b1220;
    }
    p.lead { margin: 0 0 20px; color: var(--muted); }
    .shell {
      width: min(1100px, 100%);
      background: rgba(17,24,39,0.65);
      border: 1px solid rgba(255,255,255,0.04);
      box-shadow: 0 20px 70px rgba(0,0,0,0.35);
      border-radius: 18px;
      padding: 20px;
      display: grid;
      gap: 16px;
      grid-template-columns: 360px 1fr;
    }
    @media (max-width: 940px) {
      .shell { grid-template-columns: 1fr; }
    }
    .card {
      background: var(--card);
      border: 1px solid rgba(255,255,255,0.04);
      border-radius: 14px;
      padding: 16px;
    }
    label {
      display: block;
      font-weight: 600;
      margin-bottom: 6px;
    }
    input, textarea, select {
      width: 100%;
      background: #0b1220;
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 10px;
      color: var(--text);
      padding: 10px 12px;
      font-size: 14px;
      outline: none;
    }
    textarea { resize: vertical; min-height: 80px; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 8px;
    }
    button {
      border: none;
      cursor: pointer;
      border-radius: 10px;
      padding: 10px 14px;
      font-weight: 700;
      letter-spacing: 0.2px;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }
    button.primary {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: #0b1220;
      box-shadow: 0 8px 25px rgba(34,211,238,0.25);
    }
    button.secondary {
      background: rgba(255,255,255,0.06);
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.08);
    }
    button:active { transform: translateY(1px); }
    .log {
      background: #0b1220;
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 12px;
      padding: 12px;
      height: 500px;
      overflow-y: auto;
      font-family: "SF Mono", "Roboto Mono", ui-monospace, Menlo, Consolas, monospace;
      font-size: 13px;
      line-height: 1.4;
      white-space: pre-wrap;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: rgba(34,211,238,0.12);
      color: #bef8ff;
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      margin-bottom: 8px;
    }
    .status { color: var(--muted); font-size: 13px; margin-top: 8px; }
  </style>
</head>
<body>
  <header>
    <h1><span class="logo">TP</span> Trip Planner Playground</h1>
    <p class="lead">Send messages to the Trip Planner (multi-agent) API and inspect responses quickly.</p>
  </header>

  <main class="shell">
    <section class="card">
      <div class="badge">Quick setup</div>
      <label for="chatId">Chat ID</label>
      <div class="row">
        <input id="chatId" type="text" value="playground-${Date.now()}" />
        <button class="secondary" type="button" id="resetChat">New chat id</button>
      </div>

      <label for="endpoint" style="margin-top:14px;">Endpoint</label>
      <select id="endpoint">
        <option value="/api/chat/message">/api/chat/message (Trip Planner multi-agent)</option>
      </select>

      <label for="message" style="margin-top:14px;">Message</label>
      <textarea id="message" placeholder="e.g., Plan a 5-day trip to Tokyo from NYC in March for 2 adults, budget $3000"></textarea>

      <div class="actions">
        <button class="primary" type="button" id="sendBtn">Send</button>
        <button class="secondary" type="button" id="clearLog">Clear log</button>
      </div>
      <div class="status" id="status">Idle</div>
    </section>

    <section class="card">
      <div class="badge">Response log</div>
      <div id="log" class="log"></div>
    </section>
  </main>

  <script>
    const chatIdInput = document.getElementById('chatId');
    const endpointSelect = document.getElementById('endpoint');
    const messageInput = document.getElementById('message');
    const logEl = document.getElementById('log');
    const statusEl = document.getElementById('status');

    const appendLog = (text) => {
      const ts = new Date().toISOString();
      logEl.textContent += `[${ts}] ${text}`;
      logEl.scrollTop = logEl.scrollHeight;
    };

    const setStatus = (text) => {
      statusEl.textContent = text;
    };

    document.getElementById('resetChat').onclick = () => {
      chatIdInput.value = `playground-\${Date.now()}`;
      appendLog('üîÑ New chat id generated.');
    };

    document.getElementById('clearLog').onclick = () => {
      logEl.textContent = '';
    };

    document.getElementById('sendBtn').onclick = async () => {
      const chatId = chatIdInput.value.trim();
      const message = messageInput.value.trim();
      const endpoint = endpointSelect.value;

      if (!chatId || !message) {
        appendLog('‚ö†Ô∏è chatId and message are required.');
        return;
      }

      setStatus('Sending...');
      appendLog(`‚û°Ô∏è POST \${endpoint} (chatId=\${chatId})\\n${message}`);

      try {
        const res = await fetch(endpoint, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ chatId, message })
        });

        const data = await res.json();
        const pretty = JSON.stringify(data, null, 2);
        appendLog(`‚¨ÖÔ∏è Response (status \${res.status}):\\n\${pretty}`);
        setStatus('Done');
      } catch (err) {
        appendLog('‚ùå Error: ' + err.message);
        setStatus('Error');
      }
    };
  </script>
</body>
</html>
